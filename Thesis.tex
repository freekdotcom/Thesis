%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% LaTeX Template: Project Titlepage
%
% Source: http://www.howtotex.com
% Date: April 2011
% 
% This is a title page template which be used for articles & reports.
% 
% Feel free to distribute this example, but please keep the referral
% to howtotex.com
% --------------------------------------------------------------------
% Preamble
% --------------------------------------------------------------------
\documentclass[paper=a4, fontsize=11pt,twoside]{scrartcl}	% KOMA

\usepackage[a4paper,pdftex]{geometry}	% A4paper margins
\setlength{\oddsidemargin}{5mm}			% Remove 'twosided' indentation
\setlength{\evensidemargin}{5mm}
\usepackage{pdfpages}
\usepackage[english]{babel}
\usepackage[protrusion=true,expansion=true]{microtype}	
\usepackage{amsmath,amsfonts,amsthm,amssymb}
\usepackage{graphicx}
\usepackage{blindtext}
\usepackage{enumitem}
\usepackage{longtable}
\graphicspath{{img/}}


% --------------------------------------------------------------------
% Definitions (do not change this)
% --------------------------------------------------------------------
\newcommand{\HRule}[1]{\rule{\linewidth}{#1}} 	% Horizontal rule

\makeatletter							% Title
\def\printtitle{%						
    {\centering \@title\par}}
\makeatother									

\makeatletter							% Author
\def\printauthor{%					
    {\centering \large \@author}}				
\makeatother							

\title{Logbooking Software for Science}

\author{
		F.P. van der Meulen, 500713781, (tel)+31 6 17506168\\
		Amsterdam, 2nd of March 2018\\	
		Amsterdam University of Applied Sciences\\
		HBO-ICT, Game Development\\
		C.J. Rijsenbrij\\	
		Software for Science\\
		Marten Teitsma\\
		February Semester, 2017-2018\\
}

			


\begin{document}
% ------------------------------------------------------------------------------
% Maketitle
% ------------------------------------------------------------------------------
\thispagestyle{empty}		% Remove page numbering on this page

%\printtitle
%\printauthor				% Print the author data as defined above

\maketitle


\newpage 
\printauthor

\newpage



\newpage
\tableofcontents

\newpage
\section{Preface}


\section{Abstraction}
The abstraction of the report.
\newpage
\section{Introduction}
This is a student thesis from the Amsterdam University of Applied Sciences from the HBO-ICT-Game Development study course. This student thesis is made for the organization Software for Sciences. \\
Software for Science is an organization, at the moment lead by Dr. Marten Teitsma, that combines software with science. The organization works with Astron, eScience center and CERN to create software for their scientific experiments. \\
Conseil Européen pour la Recherche Nucléaire, CERN, is a science research center in Geneve, focused on researching nuclear energy. This happends mostly with particle research, eg, shooting particles against each other in order to find out what energy comes free from one of those runs. CERN achieves this with the help of particle colliders. One of those particle colliders is ALICE. \\
ALICE, A Large Ion Collider Experiment, has its own bookkeeping system. This system makes sure that the runs ALICE makes are recorded into the bookkeeping system so that researchers, collaborators and other people can look back upon the runs.  \\
At the moment, ALICE is under maintenance. During the maintenance, subsystems and parts of ALICE are being renewed. Before the maintenance started, the request for a new bookkeeping system was made. There are three reasons for a new bookkeeping system. The first reason is that the new system must combine the bookeeping system with AliMonitor, a monitoring system. The second reason is that there are multiple desired functions that are not added to the current system, such as automated report making with the help of a template(at the moment, the shifter that has to make a report copies the previous report(bron interview transcriptie). The third reason is that most of the technologies and frameworks used to develop the system is outdated due to the fact that development started around 2009. From 2009 untill now, new featues were added to the system and new tables were created in the database. This caused that the structure of the code is not organized, the database structure was not efficient in handling requests from the client. \\
Software for Science is planning to deliver the new bookkeeping system in January. At first, they plan to show a prototype of the bookkeeping system in June to CERN workers that are involved with the creation of the prototype. After the protoype, Software for Science hosts a summer school in which interested people can work on expanding the protoype and start on creating new features. Finally, at September of 2018, a semsester at the University of Applied Sciences will be held in order to create the final product. \\
Due to the size of the project, the little amount of time avaliable for the development, and the many whishes from CERN, 
considerations for the prototype must be made. This brings the following main research question: \\ \\
Which requirements can be implemented into the logbook system for ALICE?
\\ \\
In order to make a prototype for the new bookeeping system, the back-end and the front-end are seperated from each other. This was done due to the fact that the scope of the project would become to big. Another reason was that the front-end and back-end of the application will run differently. While the back-end will run on a server, the front-end must run on every computer at CERN. This thesis handles the back-end of the new logbooking system. The front-end will be developed by Naomi Nazar. 
\\ 
This thesis is split into four parts. Every part resembles a sub research question. An explanation why these sub research questions are importand and how they could help solving the main research question can be found later in the thesis. The sub research questions are as followed: \\
\begin{enumerate}
\item What database would fit the prototype?
\item Which requirements are important for the logbook system for ALICE?
\item What are the consequences for the development process of the prototype based upon the important requirements and the database choices?
\item How can the prototype be developed?
\end{enumerate}
 

 

\newpage
\section{Techniques}
This chapter will talk about the techniques used to create the prototype.

\subsection{Javascript}
The main programming language for this research is Javascript. Javascript was one of the hard requirements set by CERN.

\subsection{AliceO2/WebUi framework}
The preference of CERN is to use CERN's own developed frameworks as much as it is possible to do so. The WebUi framework is a framework to handle HTTP requests made by the client, in this case, the front-end. The base of this framework is the ExpressJs framework. \\
The ExpressJs framework is a lightweight framework for handling HTTP calls. CERN has expanded this framework with features such as Json Web token support, debug logger systems and support for CERN's own authentication system,

\subsection{Postgresql}
The main database that will be used for the prototype is a Postgres database. 

\subsection{Mocha}
The testing framework that has been chosen is the Mocha testing framework.

\subsection{Sublime text 3}
The development enviroment for developing the prototype is Sublime Text 3.

\subsection{Lucichart}
Lucichart is used for the creation of the Enitity Relation Diagram's and the Unified Moddeling Language Diagrams.

\subsection{Scrum}
Scrum is the 

\newpage


\section{Methods}
This chapter discusses the methods used to solve the research questions. The four research questions that were earlier created will be discussed. 

\subsection{Database}
In this section, different kinds of databases will be compared with each other in order to find out which database would be the best choice for the logbook prototype. \\
The REST-API will make use of the SAMS authentication API created by CERN. However, this API is not made availiable yet for the back-end of the bookkeeping system prototyp. To still being able to work with users, the database scheme(bron) technique will be used. With the help of this technique, the database can be 'split' into two different databases. This will not affect the later implementation of the SAMS API.
What is also important, is the design of the database. The database design will be created with the help of an Enitity Relation Diagram(bron). This diagram displays all the entities that are in the database and shows the relation between different entities. Due to 'splitting' the database, two different ERD's will be shown. \\
\includegraphics[scale=1]{ERDUser}

\includegraphics[scale=0.5]{ERDLogEntry}

The main cirteria for choosing the database is that the database needs to be open-source. Since the logbooking prototype is open-source, using a database that isn't open-source would make the prototype not open-source anymore. To find out which database is the best for the prototype, tests will be made to test the different kind of databases. \\
The results of the test can be found below: \\

Tabel met de resultaten \\



\newpage
\subsection{Req analysis}
This section of the thesis will discuss the requirements analysis. There are over 120 requirements created by CERN. It is impossible to use every requirement in the prototype, due to scale of the requirements and due to time constraints that are set. An analysis is needed in order to check which requirements are nescessary to add to the protoype and which requirements can be left out.  \\
Inside the requirement document were some vague terms that weren't explained. The terms were follow-ups, on call intervention, announcements, and an EOS report. Iets over de features die er staan, maar onduidelijk zijn. \\
To solve the vague requirements and unknown wishes, a former shifter by the name of Pascal Buschoten has been interviewed. The full transscript can be found in the attachments. The interview with Pascal clarified a couple of terms like the on call intervention and the end of shift reports with templates. On call Interventions are emergency issues with a detector, a particle collider or anoter system that need to be solved as soon as possible. These issues need to be fixed within a very short amount of time. Currently, there is not a formal template availiable for the EOS reports  and because of that, all the reports do not follow the same structure. With a template, it is better to evaluate all the EOS reports).\\
A criteria for the prototype was given by Dr. Teitsma. This criteria was that all the requirements related to the Subsystem Run Coördinator must be added to the prototype. This criteria was crucial for the requirement analysis. \\
During a meeting at the ninth of may, one of the developers from CERN, Vasco Chibante Barroso, stated that he preferes that the prototype would focus more on the features instead of the roles and the authentication. This complicates the planning of the new features for the prototype. Therefore, there will be a focus on both the features wish from CERN and a focus on the SubSystem Run Coordinator from Dr. Teitsma. \\ 
The technique that will be used is the Analytic Hierarchy Process technique.(bron van pakistaanse artikel die dit voor het eerst beschrijft). "In AHP, initially whole requirements are recognized and then criteria under which these requirements will be preferred. In AHP we pair wise analyzing  between  the  probable  pairs  of  the  hierarchy. 
Now users can recognize the possible relationship between 
the hierarchies. We then pair wise analyze them and users can select its preferences from the scale which ranges from 
1 to 9."(Javed Ali Khan, Izaz Ur Rehman, Yawar Hayat Khan, Iftikhar Javed Khan, Salman Rash, 2015). One of the main advantages of using this technique is that ""(Bron pakistaanse artikel). The second software requirements analysis technique that will be used for the software is the Hierachy Analytic Hierachy Process technique(bron van artikel die dit voor het eerst beschrijft). HAHP is a technique that creates so called planes of requirements in order to simplify the requirement analysis process. A plane is a group of requirements that are grouped together if they share a similarity. These planes can, for example, align to a user of the system or a feature that will be implemented into the final product. For this requirement analysis, the planes will consists of features since this will be more important for the prototype than the users themselfs. \\
Lastly, time will be an important factor for the requirement analysis. The time will be estimated using the story points technique. This technique consists of giving  points to requirements in order to organize the effort and scale of a requirement. The range of these points are:  zero, zero point five, one, two, three, five, eight, thirteen, 20, 40 and 100. \\ \\
Applying the chosen techniques to the requirements document results in tables with pioritized requirements with scrum points given to the requirements. The requirements are grouped by feature so that it is easier to read. There were numerous requirements that were double. In cases like these, the requirements were the same, but, the requirements were assigned to different roles. These requirements are grouped together to prevent duplicity. \\
The four most important features will be given and explained due to the amount of requirements. The complete requirements table can be found as an attachment.\\

\subsubsection{Entries}
These requirements are about the different kind of entries into the system(log entries, on call interventions, run entries etc.). This feature sits at the core of the to be delivered product and therefore has the most requirements attached to it. Due to the amount of requirements that are related to the entries, this section is divided into different sections for readibility. 

\begin{longtable}{ | p{3cm} | p{8cm} | p{1.5cm} | l |}
\hline
Role & User Story & Piority & Time \\ \hline
Shifter &  A shifter makes an entry into the database consisting of several items. Each entry records the following items: time of creation,which class the creator originates: human, type of entry, general, EOS, DCS, number of run, author of the entry, title of the entry, log entry, follow ups, files and actions & 9 & 8 \\ \hline
User & As a user, I want to search log entries by different criteria (e.g. title, content, author, creation date,(...) and have the results listed. & 9 & 8 \\ \hline
Run coördinator, SRC, STC and Shifter& As run coördinator, SRC, STC or as Shifter, I may need to attach files to log entries. These files may contain text or binary information (PNGs, JPGs etc...) (Roberto Divia). & 8 & 8 \\ \hline
Subsystem expert & As a subsystem expert, I want to attach quality flags to runs so that
physicists can use them while searching for good data sets for their analysis (Vasco Chibante Barroso). & 8 & 8 \\ \hline
\end{longtable}


\subsubsection{Reports}
A requested feature in the new final product was the automatic creation of reports and templates. This is not availiable in the current product, therefore, there are a couple of requirements referencing towards the creation of templates and reports.
\begin{longtable}{ | p{2cm} | p{8cm} | p{1.5cm} | l |}
\hline
Role & User Story & Piority & Time \\ \hline
Subsystem Run Coördinator & As a SRC I would like to be able to create my own detector specific templates for example On-Call interventions. In this case I can specify the relevant information which are required from the OnCall shifter for different kind of “standard” events (Robert Munzer). & 8 & 20 \\ \hline
Shifter &  As a shifter, I want to have templates that prefill most of my end-of-shift reports from the available metadata so that I don’t need to fill inmyself what the system already knows (Vasco Chibante Barroso). & 2 & 13 \\ \hline
\end{longtable}

\subsubsection{Email}
Sending emails is availiable in the current system, however, the current way the emails are send are send in a spam related way, eg, a shifter receives an email if another shifter makes an entry from another subsystem. Therefore, the email system needs to be optimized and it should be designed in a way that will not be annoying to the user. The reason that this is of more importance, is that it is easy to adjust the way the emails are send, how the emails look like and who receives an email. Therefore, with adding it to the prototype, it will be easier to adjust it to the wishes of the users.
\begin{longtable}{ | p{2cm} | p{8cm} | p{1.5cm} | l |}
\hline
Role & User Story & Piority & Time \\ \hline
ALICE member & As an ALICE member, I would like to receive via email a global summary of each LHC Fill in order to follow ALICE operations without visiting the bookkeeping tools. Currently in the ALICE logbook, I like that I receive via email a document with info on efficiency and EOR Reasons and that on the body of the email there is a summary for
each fill (Vasco Chibante Barroso). & 8 & 20 \\ \hline
Subsystem Run Coördinator &  As a subsystem responsible, I want to be notified by email (or other
channels) of log entries which are related with my subsystem so that I can better follow-up activities without having to constantly visit the product, e.g. EOS report (Robert Munzer) (Vasco Chibante Barroso). & 8 & 13 \\ \hline
Run coördinator & As run coördinator I may request to receive automatic e-mails concerning all Logbook entries that include all systems (either without distinction or using special selection criterias). The e-mail delivery address will probably be an e-group (single e-mail address <...>@cern.ch)(Roberto Divia). & 6 & 13 \\ \hline
\end{longtable}

%\subsubsection{\ref{table:hans}}
\subsubsection{Roles and Authentication}
There are different kinds of roles and users in the bookkeeping system. It is possible that a user is assigned to multiple subsystems with different roles. Only certain roles can move in and out of subsystems. Since the different roles play an important part in the bookkeeping system, it is mandatory to have them in the prototype.

\begin{longtable}{ | p{2cm} | p{8cm} | p{1.5cm} | l |}
\hline
Role & User Story & Piority & Time \\ \hline
User & As a user, I want to be able to login with my CERN credentials to avoid having to remember a new set of credentials. This should be done by using the CERN authentication method. & 9 & 13 \\ \hline
Run coördinator, SRC and Administrator &  As run coördinator, SRC or Admin, I must be able to move collaborators to and out of subsystem teams. These action may be conflict the information stored in SAMS (Roberto Divia). & 9 & 13 \\ \hline
Run coördinator and SRC &  As run coördinator or SRC I need to give ALICE collaborators write or read-only access to the logbook. These rights will be superseeded by equivalent rights given according to the function of the user (e.g. a ALICE collaborator with read-only access will be given write access during the time of his/her duties as a shifter, subsystem run coördinator or system team member) (Roberto Divia).&6&13 \\ \hline

\label{table:hans}
\end{longtable}



\newpage
\subsection{Consequences}
This section of the thesis will be about the consequences for the development of the prototype after the pioritization of the requirements and the database choice. The wishes of the front-end(being developed by Naomi Nazar) will be taken in account aswell, due to the reason that Naomi has to decide what she wants to show for the prototype on the front-end side. \\
To help the development of the prototype, agile techniques will be used in order to plan and organize the development process. The technique that will be used for the development of the prototype will be the SCRUM(bron) technique. At the pioritization of the requirements, a time measuerment was given. The time measurement was important, because with the times estimated, it will be possible to create sprints. A sprint is a set time in which a development team works to fullfil the requirements. The length of a sprint varies from one day till two weeks. The recommended length for a sprint is one week, therefore, this lenght will be chosen. Every requirement that was estimated had a time measuerment in story points given. The amount of story points a developer can work on in a week varies. Since the story points are estimated, it will be hard to say how much story points a developer can take in a week. For the prototype, a maximun of 40 story points per sprints will be chosen. \\
The front-end and the back-end were asked to come up with features that they think should be added to the prototype. Both the front-end and the back-end used the pioritzed requirements as a start, then looked at the amount of time needed to complete the requirements. These are the requirements that have chosen to be added to the prototype. \\
\begin{longtable}{ | p{2cm} | p{8cm} | p{1.5cm} | l |}
\hline
Role & User Story & Piority & Time \\ \hline
Run coördinator, SRC, STC and Shifter& As run coördinator, SRC, STC or as Shifter, I may need to attach files to log entries. These files may contain text or binary information (PNGs, JPGs etc...) (Roberto Divia). & 8 & 8 \\ \hline
Shifter &  As a shifter, I want to have templates that prefill most of my end-of-shift reports from the available metadata so that I don’t need to fill inmyself what the system already knows (Vasco Chibante Barroso). & 2 & 13 \\ \hline
Subsystem expert & As a subsystem expert, I want to attach quality flags to runs so that
physicists can use them while searching for good data sets for their analysis (Vasco Chibante Barroso). & 8 & 8 \\ \hline
User & As a user, I want to search log entries by different criteria (e.g. title, content, author, creation date,(...) and have the results listed. & 9 & 8 \\ \hline
Run coördinator &  As run coördinator, I want to attach tags to runs so that I can then use them while searching (Vasco Chibante Barroso). & 4 & 8 \\ \hline
User &  As a user, I want to list all runs that match a given criteria to create my own run set. & 8 & 8 \\ \hline
Subsystem Run Coördinator &  As a subsystem responsible, I want to be notified by email (or other
channels) of log entries which are related with my subsystem so that I can better follow-up activities without having to constantly visit the product, e.g. EOS report (Robert Munzer) (Vasco Chibante Barroso). & 8 & 13 \\ \hline
SRC & As subsystem run coördinator I may request to receive automatic emails concerning all Logbook entries that include the System I am working for (either without distinction or using special selection criterias). The e-mail delivery address will probably be an e-group (single e-mail address <...>@cern.ch) (Roberto Divia). & 8 & 13 \\ \hline
Run coördinator, SRC and Administrator &  As run coördinator, SRC or Admin, I must be able to move collaborators to and out of subsystem teams. These action may be conflict the information stored in SAMS (Roberto Divia). & 9 & 13 \\ \hline
\end{longtable}

Not every requirement with a piority of eight or higher made the list. This is due to the requirement not fitting with the rest of the requirements or that the requirement takes too much time to complete. Another thing that should be notified, is that there is a requirement that has a low piority. This requirement was a wish from the CERN development team. Since this has something to do with the search fields that are going to be added, the front-end and the back-end has decided to add this to the prototype for CERN.   \\

There is an additional requirement, however, this requirement is dependent on access of the SAMS API used by CERN. This has not been given at the moment of writing, therefore, this requirement will be added to the list of the other requirements once access to SAMS is availiable. \\

\begin{longtable}{ | p{2cm} | p{8cm} | p{1.5cm} | l |}
\hline
Role & User Story & Piority & Time \\ \hline
Run coördinator, SRC and Administrator &  As run coördinator, SRC or Admin, I must be able to move collaborators to and out of subsystem teams. These action may be conflict the information stored in SAMS (Roberto Divia). & 9 & 13 \\ \hline
\end{longtable}

With the chosen requirements, sprints can be created. With every sprint is an explanation why the requirements were chosen for this sprint. There are a total of four sprints formulated. Every sprint will take a week to complete, as stated earlier.

\subsubsection{Sprint one}

\subsubsection{Sprint two}

\subsubsection{Sprint three}

\subsubsection{Sprint four}


\subsection{Prototype}
This section of the thesis will talk about the development process of the prototype.

\newpage
\section{Results}
This section of the report will discuss the results, which are in this case the prototype. An UML diagram of the final prototype will be shown, aswell code examples of the prototype.

\newpage
\section{Conclusion}
Concluding the report with a conclusion.
\newpage
\section{Recommendations}
Recommendations for future use of the electronic logbooking system.
\newpage

\section{Glossary}
This section of the report will explain terms that will be used during the report. 


\newpage

\section{Resource List}
\bibliographystyle{plain}
\bibliography{mybib}
\newpage

\section{Attachments}

\subsection{Interview transscript}
\includepdf[pages=-]{Transscript.pdf}

\subsection{Tables with pioritized requirements}
\include{TablesWithRequirements}


%"http://www.nispinc.com/yahoo_site_admin/assets/docs/NIST_Special_Publication_800-123.8854633.pdf" \\

%"http://westminsterresearch.wmin.ac.uk/7167/1/Ghosheh_Black_Qaddour_2008_as_published.pdf"\\
%"https://pdfs.semanticscholar.org/f587/44fc0c816608ada54923ce4d6f02bc41aa44.pdf"\\


\end{document}
